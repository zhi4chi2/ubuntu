# 扩展

bash 在执行命令之前，对输入的命令行文本进行处理，这个过程叫做扩展(expansion)

```bash
me@mypc:~$ echo *
Desktop Documents Downloads examples.desktop GitBook Music Pictures Public Templates test Videos
me@mypc:~$ 
```
即 bash 将 * 扩展成了所有文件。


## 路径名扩展


计算隐藏文件夹的数量
```bash
me@mypc:~$ ls -d .* | wc -l
32
me@mypc:~$ ls -d .[!.]* | wc -l
30
me@mypc:~$ 
```
后一种方式去掉了 ., ..

## 波浪线扩展

```bash
me@mypc:~$ echo ~
/home/me
me@mypc:~$ echo ~eg
/home/eg
me@mypc:~$
```

## 算术扩展
```bash
me@mypc:~$ echo $((2+2))
4
me@mypc:~$ echo $(($((5**2))*3))
75
me@mypc:~$ echo $(((5**2)*3))
75
me@mypc:~$ echo $((5/2))
2
me@mypc:~$ 
```

算术扩展的格式是 $(()) 只支持整数运算，支持的运算符有
- +
- -
- *
- /
- %
- \*\* - 取幂

可以使用括号改变运算顺序。

## 花括号扩展

```bash
me@mypc:~$ echo Front-{A,B, C}-Back
Front-{A,B, C}-Back
me@mypc:~$ echo Front-{A,B,C}-Back
Front-A-Back Front-B-Back Front-C-Back
me@mypc:~$ echo Number_{1..5}
Number_1 Number_2 Number_3 Number_4 Number_5
me@mypc:~$ echo {Z..A}
Z Y X W V U T S R Q P O N M L K J I H G F E D C B A
me@mypc:~$ echo a{A{1,2},B{3,4}}b
aA1b aA2b aB3b aB4b
me@mypc:~$ cd test
me@mypc:~/test$ mkdir {2009..2010}-0{1..9} {2009..2010}-{10..12}
me@mypc:~/test$ ls
2009-01  2009-04  2009-07  2009-10  2010-01  2010-04  2010-07  2010-10
2009-02  2009-05  2009-08  2009-11  2010-02  2010-05  2010-08  2010-11
2009-03  2009-06  2009-09  2009-12  2010-03  2010-06  2010-09  2010-12
me@mypc:~/test$ 
```

注意：
- 花括号表达式中可以是逗号分隔的字符串，也可以是一系列整数，或者单个字符，但不能包含内嵌的空白
- 花括号表达式可以嵌套

## 参数扩展

```bash
me@mypc:~$ echo $USER
me
me@mypc:~$ echo $SUER

me@mypc:~$ 
```

注意，对于其它扩展，如果模式拼写错误，则原样输出，而参数扩展，如果拼写错误，则输出空字符串。


## 命令替换

